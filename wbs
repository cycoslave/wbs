#!/usr/bin/env python3
# wbs (main.py)
"""
WBS Launcher
"""

import argparse
import asyncio
import json
import logging
import sys
import os
from src.core import Core
from src import __version__

logging.basicConfig(level=logging.INFO, format='%(asctime)s %(levelname)s %(message)s')
log = logging.getLogger(__name__)

def parse_args():
    parser = argparse.ArgumentParser(prog="wbs")
    parser.add_argument("-f", "--foreground", action="store_true")
    parser.add_argument("-c", "--config", default="config.json")
    parser.add_argument("-d", "--db-path")
    return parser.parse_args()

def main():
    log.info(f"Launching WBS {__version__}")
    args = parse_args()
    core = Core(args=args)
    asyncio.run(core.run(foreground=args.foreground))

if __name__ == '__main__':
    main()